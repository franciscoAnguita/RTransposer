<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RTransposer: ejemplo de uso (1) • RTransposer</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="RTransposer: ejemplo de uso (1)">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RTransposer</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/UG_example_1.html">RTransposer: ejemplo de uso (1)</a>
    </li>
    <li>
      <a href="../articles/UG_example_2.html">RTransposer: example of usage (2)</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>RTransposer: ejemplo de uso (1)</h1>
                        <h4 class="author">Viciana, F; …</h4>
            
            <h4 class="date">2019-02-06</h4>
      
      
      <div class="hidden name"><code>UG_example_1.Rmd</code></div>

    </div>

    
    
<p>It shows how to use [R] (<a href="https://www.r-roject.org/" class="uri">https://www.r-roject.org/</a>) and the package ** RTransposer ** to import the example (1) supplied by <a href="https://github.com/ICPSR/IDS">Alter in the github repositiry “Transposer”</a></p>
<div id="preparacion-de-los-datos-fuente-" class="section level2">
<h2 class="hasAnchor">
<a href="#preparacion-de-los-datos-fuente-" class="anchor"></a>Preparacion de los datos fuente.</h2>
<p>Download the data from the github repository: ICPSR / IDS corresponding to example-1 (UG_example_1) and unzip the book excell <em>UG_Example_1_v10.xlsx</em></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(RTransposer)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">require</a></span>(data.table) </a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="co">#&gt; Loading required package: data.table</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">require</a></span>(readxl)</a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="co">#&gt; Loading required package: readxl</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rm">rm</a></span>(<span class="dt">list =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ls">ls</a></span>())</a>
<a class="sourceLine" id="cb1-7" data-line-number="7"></a>
<a class="sourceLine" id="cb1-8" data-line-number="8">tmpLoc &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/tempfile">tempdir</a></span>() ; <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(tmpLoc)</a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="co">#&gt; [1] "/tmp/Rtmp1c7ZQ6"</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="co">## Descarga y descomprensión</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11">zipfile &lt;-<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste0</a></span>(tmpLoc,<span class="st">'/UG_example_1.zip'</span>)</a>
<a class="sourceLine" id="cb1-12" data-line-number="12"></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/download.file">download.file</a></span>(<span class="st">'https://github.com/ICPSR/IDS/raw/master/User_Guide/UG_example_1.zip'</span>, </a>
<a class="sourceLine" id="cb1-14" data-line-number="14">              <span class="dt">destfile =</span> zipfile )</a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/unzip">unzip</a></span>(zipfile,<span class="dt">list =</span> T)</a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="co">#&gt;                    Name Length                Date</span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17"><span class="co">#&gt; 1    CHILDREN_INPUT.csv  30028 2017-02-15 15:43:00</span></a>
<a class="sourceLine" id="cb1-18" data-line-number="18"><span class="co">#&gt; 2            entity.csv   3470 2017-02-25 18:52:00</span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19"><span class="co">#&gt; 3     PARENTS_INPUT.csv  24327 2017-02-15 15:42:00</span></a>
<a class="sourceLine" id="cb1-20" data-line-number="20"><span class="co">#&gt; 4      PLACES_INPUT.csv   4410 2017-02-15 14:46:00</span></a>
<a class="sourceLine" id="cb1-21" data-line-number="21"><span class="co">#&gt; 5            ReadMe.txt    603 2017-02-25 19:01:00</span></a>
<a class="sourceLine" id="cb1-22" data-line-number="22"><span class="co">#&gt; 6      relationship.csv   1907 2017-02-25 18:52:00</span></a>
<a class="sourceLine" id="cb1-23" data-line-number="23"><span class="co">#&gt; 7 UG_Example_1_v10.xlsx 417114 2017-02-25 19:00:00</span></a>
<a class="sourceLine" id="cb1-24" data-line-number="24"></a>
<a class="sourceLine" id="cb1-25" data-line-number="25"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/unzip">unzip</a></span>(zipfile,<span class="dt">files =</span> <span class="st">'UG_Example_1_v10.xlsx'</span>,  <span class="dt">exdir =</span>  tmpLoc )</a>
<a class="sourceLine" id="cb1-26" data-line-number="26">xfile &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste0</a></span>(tmpLoc,<span class="st">'/UG_Example_1_v10.xlsx'</span>)</a>
<a class="sourceLine" id="cb1-27" data-line-number="27"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/files">file.remove</a></span>(zipfile)</a>
<a class="sourceLine" id="cb1-28" data-line-number="28"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
<p>We extract the data from the data sheets * parent * and * children * and store them in an object of type * data.table *. Next we create some auxiliary tables derived from the two original source tables:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/data.table/topics/as.data.table">as.data.table</a></span>(<span class="kw"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_xlsx</a></span>(xfile, <span class="dt">sheet =</span> <span class="st">'parents'</span>))  -&gt;<span class="st"> </span>parents</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/data.table/topics/as.data.table">as.data.table</a></span>(<span class="kw"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_xlsx</a></span>(xfile, <span class="dt">sheet =</span> <span class="st">'children'</span>)) -&gt;<span class="st"> </span>children</a>
<a class="sourceLine" id="cb2-4" data-line-number="4"></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#------------------------------------</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co"># Create INPUT-tables derived from primary tables (if necessary)</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#------------------------------------</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8">parents[,.(parid,hlast,marriage)][ </a>
<a class="sourceLine" id="cb2-9" data-line-number="9">   children[,</a>
<a class="sourceLine" id="cb2-10" data-line-number="10">            .(name,birth, birthloc, <span class="dt">kidid=</span> parid<span class="op">*</span><span class="dv">1000</span><span class="op">+</span><span class="dv">1</span><span class="op">:</span>.N, </a>
<a class="sourceLine" id="cb2-11" data-line-number="11">                                    <span class="dt">momid=</span>parid<span class="op">+</span><span class="dv">2</span>,</a>
<a class="sourceLine" id="cb2-12" data-line-number="12">                                    <span class="dt">dadid=</span>parid<span class="op">+</span><span class="dv">1</span>),</a>
<a class="sourceLine" id="cb2-13" data-line-number="13">            keyby=.(parid)], on=<span class="st">'parid'</span>] -&gt;<span class="st"> </span>children_input</a>
<a class="sourceLine" id="cb2-14" data-line-number="14"></a>
<a class="sourceLine" id="cb2-15" data-line-number="15">names.loc  &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(parents)[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/grep">grep</a></span>(<span class="st">"loc"</span>,<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(parents))]</a>
<a class="sourceLine" id="cb2-16" data-line-number="16">names.loc  &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste0</a></span>(<span class="st">'c('</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste</a></span>(names.loc, <span class="dt">collapse =</span> <span class="st">', '</span>),<span class="st">', children$birthloc )'</span>)</a>
<a class="sourceLine" id="cb2-17" data-line-number="17">places &lt;-<span class="st"> </span>parents[, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sort">sort</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/data.table/topics/duplicated">unique</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/eval">eval</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/parse">parse</a></span>(<span class="dt">text=</span>names.loc))))]</a>
<a class="sourceLine" id="cb2-18" data-line-number="18"></a>
<a class="sourceLine" id="cb2-19" data-line-number="19">places_input&lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/data.table/topics/data.table">data.table</a></span>( </a>
<a class="sourceLine" id="cb2-20" data-line-number="20">  <span class="dt">places =</span> places,</a>
<a class="sourceLine" id="cb2-21" data-line-number="21">  <span class="dt">placeid =</span> 1L<span class="op">:</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(places)<span class="op">+</span>100L,</a>
<a class="sourceLine" id="cb2-22" data-line-number="22">  <span class="dt">level  =</span>  <span class="st">"Neighborhood"</span>,</a>
<a class="sourceLine" id="cb2-23" data-line-number="23">  <span class="dt">nested =</span> 100L,</a>
<a class="sourceLine" id="cb2-24" data-line-number="24">  <span class="dt">relvar =</span> <span class="st">"Neighborhood and Municipality"</span></a>
<a class="sourceLine" id="cb2-25" data-line-number="25">  )</a>
<a class="sourceLine" id="cb2-26" data-line-number="26"><span class="co"># append tow end register</span></a>
<a class="sourceLine" id="cb2-27" data-line-number="27">places_input &lt;-<span class="st">   </span><span class="kw"><a href="https://www.rdocumentation.org/packages/data.table/topics/rbindlist">rbind</a></span>(places_input, </a>
<a class="sourceLine" id="cb2-28" data-line-number="28">      <span class="kw"><a href="https://www.rdocumentation.org/packages/data.table/topics/data.table">data.table</a></span>(  <span class="dt">places =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"California"</span>,<span class="st">"Los Angeles"</span>),</a>
<a class="sourceLine" id="cb2-29" data-line-number="29">                                 <span class="dt">placeid =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(1L,100L),</a>
<a class="sourceLine" id="cb2-30" data-line-number="30">                                 <span class="dt">level  =</span>  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"State"</span>,<span class="st">"Municipality"</span>),</a>
<a class="sourceLine" id="cb2-31" data-line-number="31">                                 <span class="dt">nested =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="ot">NA</span>,1L),</a>
<a class="sourceLine" id="cb2-32" data-line-number="32">                                 <span class="dt">relvar =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">""</span>,<span class="st">"Municipality and State"</span>)))</a>
<a class="sourceLine" id="cb2-33" data-line-number="33">                                 </a></code></pre></div>
<p>Si es necesario se crea funciones auxiliares para la carga, que transformaran los datos originales almacenado en las tablas fuentes:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co">###-------------------------------------------------------------------------</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">###  auxiliary functions for ValueExpresion</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">###-------------------------------------------------------------------------</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#' MunicipalityName2Code</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#'    Entra un vector con nombres de municipios y retorna codigos numericos </span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#'    contenido en la tabla </span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#'    @param mun.names vector con nombre</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#'    @tab.codes  data.table with names and codes</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9">MunicipalityName2Code &lt;-<span class="st"> </span><span class="cf">function</span> ( mun.names, <span class="dt">tab.codes =</span> places_input, </a>
<a class="sourceLine" id="cb3-10" data-line-number="10">                                    <span class="dt">geo.names=</span><span class="st">'places'</span> ,<span class="dt">geo.codes =</span><span class="st">'placeid'</span> ) {</a>
<a class="sourceLine" id="cb3-11" data-line-number="11">   tab.codes[[geo.codes]] -&gt;<span class="st"> </span>codes</a>
<a class="sourceLine" id="cb3-12" data-line-number="12">   <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(codes) &lt;-<span class="st"> </span>tab.codes[[geo.names]]</a>
<a class="sourceLine" id="cb3-13" data-line-number="13">   <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/function">return</a></span>(codes[mun.names])</a>
<a class="sourceLine" id="cb3-14" data-line-number="14">}</a></code></pre></div>
</div>
<div id="especificaciones-de-las-regla-de-importancion" class="section level2">
<h2 class="hasAnchor">
<a href="#especificaciones-de-las-regla-de-importancion" class="anchor"></a>Especificaciones de las regla de importanción</h2>
<p>Las transformaciones que se aplicaran sobre las variables de los fichero fuentes se define en un libro excell con una estructura especifica (Se incluyen un ejemplo de este libro en el directorio <em>inst/extdata/</em> del paquete) para optener los registros que compone el IDS.</p>
</div>
<div id="generacion-de-la-bd-en-formato-ids" class="section level2">
<h2 class="hasAnchor">
<a href="#generacion-de-la-bd-en-formato-ids" class="anchor"></a>Generación de la BD en formato IDS</h2>
<p>A continuación se aplica la función <em>TRtransposer::tranposer</em>, con el parámetro el nombre del <a href="https://github.com/viciana/RTransposer/raw/master/inst/extdata/ERD_UG_Example_1_v10.xlsx">fichero excell</a> con las distintas transformaciones a aplicar sobre las tablas de datos, previamente cargadas en el ambiente global de R (*.GlobalEnv).</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co">##--------------------------------------------------------------------------</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co">## Transposer with rules to import in  EntityRelationDefinition01.xlsx</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="kw"><a href="../reference/transposer.html">transposer</a></span>(<span class="dt">file.definition =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"extdata"</span>, </a>
<a class="sourceLine" id="cb4-4" data-line-number="4">                                        <span class="st">"ERD_UG_Example_1_v10.xlsx"</span>, </a>
<a class="sourceLine" id="cb4-5" data-line-number="5">                                        <span class="dt">package =</span> <span class="st">"RTransposer"</span>) ) -&gt;<span class="st"> </span>outcomes</a></code></pre></div>
<p>La ejecución del código anterior produce una lista con 5 objeto del tipo <em>data.table</em> y con la nomenclatura y estructura especificado en el formato IDS.</p>
<p>A partir de este objeto se pueden obtener las 5 tablas en fichero de texto del tipo CSV, que pueden ser facilmente leídos por programas de base de dato o análisis estadístico.</p>
<p>Las siguientes ordenes realizan esta exportación</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co">### Muestra resumen estadistico de outcomes::</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste</a></span>(<span class="st">'== INDIVIDUAL == '</span>)) ;  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(outcomes<span class="op">$</span>INDIVIDUAL[,.N,<span class="dt">keyby=</span>Type])</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">#&gt; [1] "== INDIVIDUAL == "</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#&gt;                  Type   N</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt;  1:        BIRTH_DATE 565</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt;  2:    BIRTH_LOCATION 565</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt;  3:        DEATH_DATE 200</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt;  4:    DEATH_LOCATION 200</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt;  5:        FIRST_NAME 565</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt;  6:         LAST_NAME 565</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt;  7:     MARRIAGE_DATE 200</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt;  8: MARRIAGE_LOCATION 200</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt;  9:        OCCUPATION 200</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">#&gt; 10:               SEX 200</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste</a></span>(<span class="st">'== CONTEXT == '</span>)); <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(outcomes<span class="op">$</span>CONTEXT[,.N,<span class="dt">keyby=</span>Type])</a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="co">#&gt; [1] "== CONTEXT == "</span></a>
<a class="sourceLine" id="cb5-17" data-line-number="17"><span class="co">#&gt;     Type   N</span></a>
<a class="sourceLine" id="cb5-18" data-line-number="18"><span class="co">#&gt; 1: LEVEL 174</span></a>
<a class="sourceLine" id="cb5-19" data-line-number="19"><span class="co">#&gt; 2:  NAME  74</span></a>
<a class="sourceLine" id="cb5-20" data-line-number="20"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste</a></span>(<span class="st">'== INDIV_INDIV == '</span>)); <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(outcomes<span class="op">$</span>INDIV_INDIV[,.N,<span class="dt">keyby=</span>Relation])</a>
<a class="sourceLine" id="cb5-21" data-line-number="21"><span class="co">#&gt; [1] "== INDIV_INDIV == "</span></a>
<a class="sourceLine" id="cb5-22" data-line-number="22"><span class="co">#&gt;    Relation   N</span></a>
<a class="sourceLine" id="cb5-23" data-line-number="23"><span class="co">#&gt; 1:    Child 730</span></a>
<a class="sourceLine" id="cb5-24" data-line-number="24"><span class="co">#&gt; 2:   Father 365</span></a>
<a class="sourceLine" id="cb5-25" data-line-number="25"><span class="co">#&gt; 3:  Husband 100</span></a>
<a class="sourceLine" id="cb5-26" data-line-number="26"><span class="co">#&gt; 4:   Mother 365</span></a>
<a class="sourceLine" id="cb5-27" data-line-number="27"><span class="co">#&gt; 5:     Wife 100</span></a>
<a class="sourceLine" id="cb5-28" data-line-number="28"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste</a></span>(<span class="st">'==  INDIV_CONTEXT == '</span>)); <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(outcomes<span class="op">$</span>INDIV_CONTEXT[,.N,<span class="dt">keyby=</span>Relation])</a>
<a class="sourceLine" id="cb5-29" data-line-number="29"><span class="co">#&gt; [1] "==  INDIV_CONTEXT == "</span></a>
<a class="sourceLine" id="cb5-30" data-line-number="30"><span class="co">#&gt;    Relation   N</span></a>
<a class="sourceLine" id="cb5-31" data-line-number="31"><span class="co">#&gt; 1:    Child 365</span></a>
<a class="sourceLine" id="cb5-32" data-line-number="32"><span class="co">#&gt; 2:  Husband 100</span></a>
<a class="sourceLine" id="cb5-33" data-line-number="33"><span class="co">#&gt; 3:     Wife 100</span></a>
<a class="sourceLine" id="cb5-34" data-line-number="34"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste</a></span>(<span class="st">'==  CONTEXT_CONTEXT == '</span>)); <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(outcomes<span class="op">$</span>CONTEXT_CONTEXT[,.N,<span class="dt">keyby=</span>Relation])</a>
<a class="sourceLine" id="cb5-35" data-line-number="35"><span class="co">#&gt; [1] "==  CONTEXT_CONTEXT == "</span></a>
<a class="sourceLine" id="cb5-36" data-line-number="36"><span class="co">#&gt;                         Relation   N</span></a>
<a class="sourceLine" id="cb5-37" data-line-number="37"><span class="co">#&gt; 1:                                 1</span></a>
<a class="sourceLine" id="cb5-38" data-line-number="38"><span class="co">#&gt; 2:        Municipality and State   1</span></a>
<a class="sourceLine" id="cb5-39" data-line-number="39"><span class="co">#&gt; 3: Neighborhood and Municipality  72</span></a>
<a class="sourceLine" id="cb5-40" data-line-number="40"><span class="co">#&gt; 4:        Union and Neighborhood 665</span></a>
<a class="sourceLine" id="cb5-41" data-line-number="41"></a>
<a class="sourceLine" id="cb5-42" data-line-number="42"><span class="co">## Almacena resultados en tablas CSV con resultados</span></a>
<a class="sourceLine" id="cb5-43" data-line-number="43"><span class="cf">for</span> (i <span class="cf">in</span>  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(outcomes)) {</a>
<a class="sourceLine" id="cb5-44" data-line-number="44">  <span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/write.table">write.csv</a></span>(outcomes[[i]],<span class="dt">file=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste0</a></span>(tmpLoc,<span class="st">'/'</span>,i,<span class="st">'.CSV'</span>),<span class="dt">na=</span><span class="st">''</span>,<span class="dt">row.names=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb5-45" data-line-number="45">}</a>
<a class="sourceLine" id="cb5-46" data-line-number="46"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(tmpLoc)</a>
<a class="sourceLine" id="cb5-47" data-line-number="47"><span class="co">#&gt; [1] "/tmp/Rtmp1c7ZQ6"</span></a>
<a class="sourceLine" id="cb5-48" data-line-number="48"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list.files">dir</a></span>(<span class="dt">path =</span> tmpLoc,<span class="dt">pattern =</span> <span class="st">'*.CSV'</span>)</a>
<a class="sourceLine" id="cb5-49" data-line-number="49"><span class="co">#&gt; [1] "CONTEXT_CONTEXT.CSV" "CONTEXT.CSV"         "INDIV_CONTEXT.CSV"  </span></a>
<a class="sourceLine" id="cb5-50" data-line-number="50"><span class="co">#&gt; [4] "INDIV_INDIV.CSV"     "INDIVIDUAL.CSV"</span></a></code></pre></div>
<p>Borramos los ficheros de prueba …</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/files">file.remove</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste0</a></span>(tmpLoc,<span class="st">'/'</span>,<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(outcomes),<span class="st">'.CSV'</span>))</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/files">file.remove</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste0</a></span>(tmpLoc,<span class="st">'/'</span>,<span class="st">'UG_Example_1_v10.xlsx'</span>))</a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#preparacion-de-los-datos-fuente-">Preparacion de los datos fuente.</a></li>
      <li><a href="#especificaciones-de-las-regla-de-importancion">Especificaciones de las regla de importanción</a></li>
      <li><a href="#generacion-de-la-bd-en-formato-ids">Generación de la BD en formato IDS</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Francisco J Viciana, Diogo Paiva.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9000.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
